<style>

    .module {
        background:
        linear-gradient(
                to bottom,
                rgba(0, 0, 0, 0),
                rgba(0, 0, 0, 0.4)
        ),
        url('img/coffee-bg.jpg') center;
        height:150px;
        position: relative;
        overflow: hidden;
        border-bottom: 5px solid #dddddd;
    }
    .module > header {
        position: absolute;
        top: 10px;
        left: 100px;
        width: 100%;
        text-align: left;
    }
    .module > header > h3  {
        margin: 0;
        color: white;
        text-shadow: 0 1px 0 black;
    }
    .module > header > h5  {
        margin: 0;
        color: white;
        text-shadow: 0 1px 0 black;
    }

    .module .avatar {
        border-radius: 50%;
        box-shadow: 0 0 0 3px #fff, 0 0 0 2px #999, 0 2px 5px 4px rgba(0,0,0,.2);

        display: block;
        margin-left: auto;
        margin-right: auto;
        position: absolute;
        top: 15px;
        left: 15px;

    }

    .button-follow{
        position: absolute;
        bottom: 5px;
        right: 5px;
    }

    .custom-icon {
        font-size: 16px;
        color : red;
    }

</style>


<ion-view view-title="Event">



    <ion-nav-buttons side="right">
        <button class="button button-icon ion-more" ng-click="popover.show($event)"></button>
    </ion-nav-buttons>
    <ion-content ion-sticky>



<div class="module">
    <div ng-show="!isMine(event)">
        <button class="button button-calm button-small button-follow" ng-click="openRSVP(summary.myParticipation)" ng-show="summary.myParticipation.status=='RSVP'">
            RSVP
        </button>
        <button class="button button-assertive button-small button-follow" ng-click="openRSVP(summary.myParticipation)" ng-show="summary.myParticipation.status=='OUT'">
            I'm out...
        </button>
        <button class="button button-balanced button-small energized button-follow" ng-click="openRSVP(summary.myParticipation)" ng-show="summary.myParticipation.status=='IN'">
            I'm In!
        </button>
    </div>

    <img ng-src="img/coffee-512px.svg" class="avatar" width="64" ng-click="goToUser(event.username)">
    <header>
        <h3>
            {{event.name}}
        </h3>
        <h5>
            @{{event.groupName}}
        </h5>
    </header>
</div>

<div class="row">
    <a class="col statistic" ui-sref="event-participation({eventId: event.id})">
        <p class="statistic">
            <b>{{summary.participationsSize}}</b>
            <br>
        <p class="statistic-label">Participants</p>
    </a>
    <a class="col statistic" ui-sref="event-followers({eventId: event.id})">
        <p class="statistic">
            <b>{{summary.followerSize}}</b>
            <br>
        <p class="statistic-label">Followers</p>
    </a>
    <a class="col statistic" ui-sref="event-comments({eventId: event.id})">
        <p class="statistic">
            <b>{{summary.commentSize}}</b>
            <br>
        <p class="statistic-label">Comments</p>
    </a>
</div>

<div class="row">
    <div class="col">
        <h5>
            <i class="icon ion-location"> {{event.city}}, {{event.country}}</i>
        </h5>
        <h5>
            <i class="icon ion-android-calendar"> {{event.date | date:'short'}}</i>
        </h5>
        {{event.description}}
    </div>
</div>

<!--

<a class="item item-divider calm" ui-sref="event-participation({eventId: event.id})">
    Participations...
</a>
<div class="list">
    <div ng-repeat="participation in summary.participations track by participation.id" >
        <div ng-include data-src="'templates/events/partial/event-participation.html'"></div>
    </div>
    <a ng-show="summary.participations.length <= 0" class="item">
        <h2>no participation yet</h2>
    </a>
</div>
-->
        <ion-list class="list">
            <ion-item class="item-divider assertive"> In </ion-item>
            <ion-item ng-repeat="participation in summary.participations | filter: { status: 'IN'} track by participation.id" class="item item-avatar" ui-sref="user({username: participation.username})">
                <img ng-src="img/users/{{participation.username}}.jpg" >
                <div ng-switch="participation.status">
                    <h2 ng-switch-when="IN"> <i class="icon ion-record balanced"></i> {{participation.username}} is in - <span am-time-ago="participation.modificationDate"></span></h2>
                </div>
                <p ng-if="participation.comment"><i class="icon ion-chatbubble"> {{participation.comment}}</i></p>
            </ion-item>
            <ion-item class="item-divider assertive"> Out </ion-item>
            <ion-item ng-repeat="participation in summary.participations | filter: { status: 'OUT'} track by participation.id" class="item item-avatar" ui-sref="user({username: participation.username})">
                <img ng-src="img/users/{{participation.username}}.jpg" >

                <div ng-switch="participation.status">
                    <h2 ng-switch-when="OUT"> <i class="icon ion-record assertive"></i> {{participation.username}} is out - <span am-time-ago="participation.modificationDate"></span></h2>
                </div>
                <p ng-if="participation.comment"><i class="icon ion-chatbubble"> {{participation.comment}}</i></p>
            </ion-item>
            <ion-item class="item-divider assertive"> Rsvp </ion-item>
            <ion-item ng-repeat="participation in summary.participations | filter: { status: 'RSVP'} track by participation.id" class="item item-avatar" ui-sref="user({username: participation.username})">
                <img ng-src="img/users/{{participation.username}}.jpg" >

                <div ng-switch="participation.status">
                    <h2 ng-switch-default> <i class="icon ion-record"></i> {{participation.username}} still has to rsvp - <span am-time-ago="participation.modificationDate"></span></h2>
                </div>
                <p ng-if="participation.comment"><i class="icon ion-chatbubble"> {{participation.comment}}</i></p>

            </ion-item>

        </ion-list>




    </ion-content>
</ion-view>